# BÀI 10
# CHƯƠNG TRÌNH CON VÀ THƯ VIỆN CÁC CHƯƠNG TRÌNH CON CÓ SẴN

## Học xong bài này, em sẽ:

- Xây dựng và sử dụng được chương trình con trong Python.
- Sử dụng được chương trình con xây dựng sẵn của hệ thống.

Khi giải quyết một bài toán phức tạp, ta có thể phân chia nó thành một số bài toán con. Trong lập trình có khái niệm chương trình con, em hãy đoán xem chương trình con của một chương trình là gì.

## 1) Khái niệm chương trình con

Khi giải quyết một bài toán phức tạp, người ta thường phân chia bài toán đó thành một số bài toán con. Em sẽ chia bài toán sau đây thành những bài toán con nào?
Bài toán: Cho ba tam giác có độ dài ba cạnh lần lượt là a, b và c; u, v và w; p, q và r. Độ dài các cạnh đều là số thực cùng đơn vị đo. Em hãy tính diện tích của mỗi tam giác đó và đưa ra diện tích lớn nhất trong các diện tích tính được. Công thức Heron tính diện tích tam giác theo độ dài ba cạnh:
S = sqrt((a + b + c)(a + b - c)(a - b + c)(b + c - a)) / 4

Khi lập trình để giải một bài toán có thể chia bài toán đó thành các bài toán con, viết các đoạn chương trình giải các bài toán con. Sau đó xây dựng chương trình giải quyết bài toán ban đầu bằng cách sử dụng các đoạn chương trình đã viết cho các bài toán con.

## 2) Khai báo và gọi thực hiện một hàm trong Python

Có thể gọi một chương trình con trong Python là một hàm. Để sử dụng hàm cần khai báo hàm và viết lời gọi thực hiện. Hàm trong Python được khai báo theo mẫu sau:

        def tên_hàm (tham số):
        Các lệnh mô tả hàm


Trong đó:
- Tên hàm phải theo quy tắc đặt tên trong Python.
- Theo sau tên hàm có thể có hoặc không có các tham số.
- Phần thân hàm (gồm các lệnh mô tả hàm) phải viết lùi vào theo quy định của Python.

## 3) Chuyển dữ liệu cho hàm thực hiện

Chương trình trong khai báo hàm ptb1(), hàm này giải phương trình có dạng ax + b = 0. Khi được gọi thực hiện, hàm ptb1() yêu cầu nhập vào các hệ số a, b từ bàn phím, biện luận và giải phương trình rồi đưa ra kết quả.
1) Em hãy soạn thảo chương trình ở đặt tên là “VD_ptb1.py”, sau đó chạy chương trình với các dữ liệu đầu vào như rồi đối chiếu kết quả.
2) Em hãy sửa lại chương trình “VD_ptb1.py” theo các bước trong Các bước sửa chương trình “VD_ptb1.py”, đặt tên là “Try_ptb1.py”, chạy thử và trả lời hai câu hỏi sau:
a) Chương trình “Try_ptb1.py” đã truyền trực tiếp hệ số a = 5, b = 4 vào lời gọi hàm ptb1(5, 4), kết quả khi chạy có khác gì với kết quả chạy chương trình không?
b) Vì sao trong chương trình “Try_ptb1.py”, thân của hàm không cần những câu lệnh nhập giá trị cho các hệ số a, b?

Các bước sửa chương trình “VD_ptb1.py”:
1) Bổ sung tham số a, b vào trong ngoặc () ở dòng khai báo hàm, để được ptb1(a, b).
2) Xoá trong thân hàm hai lệnh nhập hệ số a, b từ bàn phím.
3) Thay lời gọi ptb1() bằng ptb1(5, 4) để hàm thực hiện với a = 5, b = 4.
4) Thêm các lời gọi thực hiện hàm ptb1(a, b) tương ứng với cặp hệ số a = 0, b = 0 và a = 0, b = 4.

Một hàm có thể được thực hiện với những giá trị do chương trình truyền vào qua lời gọi hàm, tương ứng với danh sách tham số. Hai ví dụ sau đây cho thấy hai cách truyền dữ liệu cho hàm thực hiện.
- Cách thứ nhất, chương trình gọi thực hiện hàm với các giá trị cụ thể (Ví dụ 1).
- Cách thứ hai, chương trình gọi thực hiện hàm với giá trị tham số truyền vào (Ví dụ 2).
Ví dụ 1. Ở chương trình “Try1_ptb1.py”, lời gọi ptb1(5, 4) đã làm hàm ptb1(a, b) được thực hiện với a = 5, b = 4.

Ví dụ 2. Chương trình ở khai báo và sử dụng hàm BMI (h, w) tính chỉ số sức khoẻ BMI theo hai tham số chiều cao và cân nặng. Lời gọi BMI (cao, nặng) đã làm hàm BMI (h, w) được thực hiện với h có giá trị của biến cao, w có giá trị của biến nặng. Giá trị của hai biến cao và nặng của chương trình đã được nhập vào từ bàn phím trước khi chương trình gọi thực hiện hàm BMI (h, w).

## 4) Lời gọi hàm

Trong nhiều ngôn ngữ lập trình bậc cao, hàm có thể trả về cho chương trình một giá trị qua tên của nó. Như vậy tên hàm được sử dụng như một biến trong chương trình gọi nó. Đó cũng là lí do làm cho người lập trình nhận thấy việc sử dụng hàm rất hữu ích ở nhiều trường hợp. Trong Python cũng vậy, một hàm có thể trả về một giá trị qua tên của nó nếu như có lệnh return <Giá_trị> trước khi ra khỏi hàm.

## 5) Các hàm được xây dựng sẵn

Để đáp ứng tốt hơn nhu cầu đa dạng trong xử lí thông tin và giúp cho việc lập trình thuận lợi, một loạt các hàm được xây dựng sẵn, gắn với mỗi hệ thống ngôn ngữ lập trình bậc cao. Mỗi tập hợp gồm một số các hàm được xây dựng sẵn thường gọi là một thư viện. Trong chương trình của mình, người lập trình chỉ cần gọi hàm có sẵn (trong một thư viện) thực hiện mà không cần phải tự mình xây dựng lại hàm đó. Số lượng thư viện, số hàm trong mỗi thư viện, lời gọi tới chúng,... có thể thay đổi theo thời gian và phụ thuộc vào hệ thống ngôn ngữ lập trình.

Ngay từ những bước đầu tiên làm quen với lập trình Python, em đã sử dụng một số hàm trong thư viện chuẩn của Python như print(), input(),... và một số hàm toán học trong thư viện math. Thư viện math cung cấp các hằng và hàm toán học, ví dụ hàm gcd (x, y) trả về ước chung lớn nhất của x và y.

## Tóm tắt bài học

- Chương trình con là một đoạn câu lệnh thực hiện một việc nào đó được đặt tên.
- Với những hàm trả về giá trị xử lí qua tên hàm thì tên của hàm được dùng như một biến trong chương trình gọi.
- Mỗi hệ thống lập trình của một ngôn ngữ lập trình bậc cao đều cung cấp cấp một số thư viện các chương trình con được xây dựng sẵn.
- Trong Python:
    - Cách khai báo chương trình con:
        `def tên_hàm (Tham_số_1, Tham_số_2,..., Tham_số_N):`
        `Các lệnh mô tả hàm`
    - Muốn xây dựng hàm trả về giá trị xử lí, cần kết thúc hàm bằng câu lệnh return cùng với biểu thức hay biến chứa giá trị trả về.
