# Bài 4

# SẮP XẾP NỔI BỌT

**Học xong bài này, em sẽ:**

* Biết được thế nào là sắp xếp nổi bọt.

* Mô phỏng được hoạt động của thuật toán sắp xếp nổi bọt cho một dãy đầu vào kích thước nhỏ.


Làm thế nào để cho máy tính biết một dãy đã có thứ tự tăng dần?

### 1. Ý tưởng sắp xếp bằng cách đổi chỗ các phần tử liền kề

Giả sử có một dãy hộp kẹo, mỗi hộp chứa một số kẹo nào đó. Có một chú robot chỉ biết làm hai thao tác:

– So sánh số kẹo trong hai hộp cạnh nhau;

– Hoán đổi vị trí hai hộp kẹo cạnh nhau.

Theo em, chú robot phải làm thế nào để xếp lại các hộp sao cho số kẹo trong các hộp tăng dần?

Ví dụ: Cho dãy 5 hộp kẹo với số lượng kẹo trong mỗi hộp khác nhau, tương ứng là:

| 5 | 1 | 4 | 2 | 8 |
|---|---|---|---|---|

Robot đã thực hiện như sau:

Ở lượt thứ nhất, so sánh hai hộp đầu tiên, nếu số kẹo ở hộp đứng trước lớn hơn số kẹo ở hộp đứng sau thì đổi vị trí hai hộp này cho nhau. Tiếp tục làm như vậy với hộp thứ hai và thứ ba, với hộp thứ ba và thứ tư,... cho đến hết dãy hộp kẹo là hết *lượt*. Sau khi thực hiện các thao tác như vậy, hộp cuối dãy là hộp chứa nhiều kẹo nhất.

Tiếp tục các *lượt* thứ hai, thứ ba theo cách như *lượt* thứ nhất, cứ lặp lại như vậy cho đến khi gặp một *lượt* mà suốt cả *lượt* đó robot không phải đổi chỗ hai hộp nào thì dãy đã được sắp xếp xong, robot kết thúc công việc.

### 2. Thuật toán sắp xếp nổi bọt

Trong ví dụ trên, robot thực hiện một số *lượt* di chuyển từ đầu đến cuối dãy để so sánh và đổi chỗ các cặp phần tử liền kề nếu chúng chưa đúng với thứ tự tăng dần.

Ở mỗi *lượt*, robot đã thực hiện:

– Xuất phát từ đầu dãy, i = 1, xét cặp (aᵢ, aⱼ), nếu aᵢ > aⱼ (trái thứ tự mong muốn) thì đổi chỗ cho nhau; trái lại không cần làm gì.

– Dịch sang phải một vị trí, xét cặp (aᵢ, aⱼ), so sánh và đổi chỗ nếu cần.

– Quá trình tiếp tục, dịch sang phải một vị trí, xét cặp (aᵢ₊₁, aⱼ), so sánh và đổi chỗ nếu cần.

– Khi hết dãy thì xong một *lượt* xét các cặp số kề nhau để đổi chỗ.

Chú ý rằng sau *lượt* đổi chỗ thứ nhất, giá trị lớn nhất là 8 đã ở cuối dãy, đúng vị trí cuối cùng của nó; nhưng chỉ một *lượt* đổi chỗ chưa đảm bảo dãy có thứ tự tăng dần.

Nếu dãy chưa được sắp xếp đúng thứ tự thì trong dãy sẽ còn cặp phần tử liền kề mà không đúng thứ tự tăng dần. Như vậy robot phải thực hiện nhiều *lượt* cho đến khi không còn bất kì cặp liền kề (aᵢ, aᵢ₊₁) nào trái thứ tự mong muốn, tức là trong một *lượt* không còn xảy ra đổi chỗ lần nào nữa. Trong ví dụ, robot thực hiện ba *lượt*, không cần làm tiếp *lượt* nào nữa vì trong *lượt* thứ ba không xảy ra lần đổi chỗ nào.

**Câu 1.** Trong thuật toán sắp xếp nổi bọt, khi nào hai phần tử liền kề được đổi chỗ?

**Câu 2.** Thuật toán sắp xếp nổi bọt kết thúc khi nào?

**Câu 3.** Khi nào thực hiện thuật toán sắp xếp nổi bọt chỉ cần một lượt so sánh các cặp phần tử liền kề và đổi chỗ?

## TÓM TẮT BÀI HỌC

* Thuật toán sắp xếp nổi bọt thực hiện nhiều lượt so sánh và đổi chỗ các cặp phần tử liền kề cho đến khi không còn bất kì cặp phần tử liền kề (aᵢ, aᵢ₊₁) nào trái thứ tự mong muốn.
