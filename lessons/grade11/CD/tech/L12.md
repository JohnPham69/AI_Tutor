## CHỦ ĐỀ F. GIẢI QUYẾT VẤN ĐỀ VỚI SỰ TRỢ GIÚP CỦA MÁY TÍNH
## GIỚI THIỆU CÁC HỆ CƠ SỞ DỮ LIỆU

# BÀI 2
# BẢNG VÀ KHOÁ CHÍNH TRONG CƠ SỞ DỮ LIỆU QUAN HỆ

### Học xong bài này, em sẽ:

- Diễn đạt được khái niệm quan hệ (bảng) và khoá của một quan hệ. Giải thích được các khái niệm đó qua ví dụ minh hoạ.
- Giải thích được ràng buộc khoá là gì.
- Biết được các phần mềm quản trị CSDL có cơ chế kiểm soát các cập nhật dữ liệu để đảm bảo ràng buộc khoá.

Hồ sơ học sinh một lớp được tổ chức theo dạng bảng: mỗi hàng chứa dữ liệu về một học sinh, mỗi cột chứa dữ liệu về một thuộc tính của học sinh như. Họ và tên, Ngày sinh,... Theo em, cách tổ chức như vậy có ưu điểm gì trong việc quản lí thông tin học sinh của lớp?

# 1 Tổ chức dữ liệu trong CSDL quan hệ và các thao tác trên dữ liệu

### a) Cơ sở dữ liệu quan hệ

Cơ sở dữ liệu quan hệ là một tập hợp các bảng dữ liệu có liên quan với nhau. cho thấy một phân bảng HỌC SINH 11 trong một CSDL quan hệ của một trường học.

Bảng 1. Một phân bảng HỌC SINH 11 của một cơ sở dữ liệu quan hệ

| Mã định danh | Họ và tên | Ngày sinh | Giới tính | Đoàn viên | Địa chỉ |
|---|---|---|---|---|---|
| 13109413 | Phan Thuý Anh | 29/10/2007 | Nữ | ✓ | 39 Hùng Vương |
| 13109735 | Lê Minh Đức | 05/09/2007 | Nam | ✓ | 15 Văn Cao |
| 13124595 | Hoàng Giang | 21/12/2007 | Nam | | 27 Lò Sũ |
| 31387552 | Nguyễn Thị Hà | 12/06/2007 | Nữ | ✓ | 29 Hàng Bún |
| 13169292 | Trần Minh Tú | 14/11/2007 | Nữ | ✓ | 18 Quán Thánh |

Trên mỗi cột trong bảng cho biết ý nghĩa dữ liệu ở các ô thuộc cột đó. Tên bảng cùng với tên cột giúp hiểu nghĩa của mỗi hàng trong bảng. Mỗi hàng trong bảng chứa một bộ các giá trị, ví dụ, trong bảng 1, bộ gồm 6 giá trị: "13109413", "Phan Thuý Anh", "29/10/2007", "Nữ", "✓", "39 Hùng Vương" cho thông tin về một học sinh.

Mỗi một hàng trong bảng của CSDL quan hệ còn được gọi là một bản ghi. Mỗi cột của bảng còn được gọi là một trường, trong Bảng 1 bảng HỌC SINH 11 có 6 trường phản ánh 6 thuộc tính của mỗi học sinh.

### b) Cập nhật dữ liệu

Cập nhật dữ liệu của một bảng bao gồm các thao tác thêm, sửa và xoá dữ liệu của bảng. Cấu trúc của một bảng bao gồm các mô tả cho các cột của bảng; người thiết kế CSDL sẽ định nghĩa cấu trúc của các bảng dựa vào các yêu cầu quản lí của đơn vị chủ quản. Cập nhật dữ liệu của một bảng không làm thay đổi cấu trúc của bảng.

### c) Truy vấn trong CSDL quan hệ

Dữ liệu được tổ chức, lưu trữ trong CSDL là để người sử dụng có thể khai thác dữ liệu, rút ra thông tin phục vụ các hoạt động hoặc giúp đưa ra các quyết định phù hợp, kịp thời. Bản chất việc khai thác một CSDL là tìm kiếm dữ liệu và kết xuất ra thông tin cần tìm, công việc này còn được gọi là truy vấn CSDL.

### d) Các ràng buộc dữ liệu trong CSDL quan hệ

Theo em, mỗi học sinh cần phải có riêng một Mã định danh để đưa vào hồ sơ quản lí hay không? Vì sao?

Dữ liệu trong CSDL quan hệ phải thoả mãn một số ràng buộc gọi là ràng buộc toàn vẹn về dữ liệu để đảm bảo tính xác định và đúng đắn của dữ liệu. Ví dụ một số ràng buộc dữ liệu:

- Trong một bảng không có hai bản ghi ghi giống nhau hoàn toàn.
- Trong cùng một bảng, mỗi trường có một tên phân biệt với tất cả các trường khác.
- Mỗi bảng có một tên phân biệt với các bảng khác trong cùng CSDL.
- Mỗi ô của bảng chỉ chứa một giá trị.

Ngoài ra, tuỳ theo yêu cầu của bài toán quản lí cụ thể mà người thiết kế CSDL đặt thêm một số ràng buộc khác cho dữ liệu. Ví dụ: người thiết kế CSDL cho trường học có thể yêu cầu *Mã định danh* của mỗi học sinh phải là một dãy số không quá 12 kí tự, tất cả các kí tự đều là số. Với ràng buộc như thế, việc nhập “011234567899” vào cột *Mã định danh* là không hợp lệ, đó là vi phạm ràng buộc miền giá trị.

# 2 Khoá của một bảng

Trong một bảng, mỗi bản ghi thể hiện thông tin về một đối tượng (một cá thể hoặc một sự kiện) nên không thể có hai bản ghi giống nhau hoàn toàn. Trong bảng chứa dữ liệu học sinh, ví dụ như bảng HỌC SINH 11, hai học sinh khác nhau sẽ có hai *Mã định danh* khác nhau. Điều này giống như trường hợp số căn cước công dân của mỗi người xác định người đó là duy nhất, không nhầm lẫn với bất cứ ai.

Khoá của một bảng: tập hợp các trường (có thể chỉ là một trường) mà mỗi bộ giá trị của nó xác định duy nhất một bản ghi ở trong bảng và ta không thể bỏ đi trường nào mà tập hợp các trường còn lại vẫn còn có tính chất xác định duy nhất một bản ghi trong bảng.

Trong một bảng, có những tập hợp gồm một trường hay một số trường mà giá trị của chúng ở các bản ghi khác nhau là khác nhau. Ví dụ: một giá trị của trường *STT* chỉ xuất hiện ở một bản ghi; một bộ giá trị của hai trường *CCCD* và *BHYT*, chẳng hạn (“001160017719”, “HT3010101040124”) chỉ xuất hiện ở một bản ghi. Nói cách khác, tập hợp gồm một trường *STT* và tập hợp gồm hai trường *CCCD* và *BHYT* đều có tính chất: Dùng giá trị của nó xác định được duy nhất một bản ghi trong bảng. Với ví dụ bảng, có thể kể ra thêm một số tập hợp trường có tính chất như vậy:

- Tập chỉ gồm một trường *CCCD*.
- Tập gồm hai trường *STT, Họ và tên*.
- Tập gồm tất cả sáu trường.

# 3 Hệ quản trị CSDL đảm bảo ràng buộc khoá

Bất cứ hệ quản trị CSDL nào cũng có cơ chế kiểm soát, ngăn chặn những vi phạm ràng buộc khoá đối với việc cập nhật dữ liệu. Để thực hiện điều đó, phần mềm yêu cầu người tạo lập CSDL chỉ định trường làm khoá chính và mỗi khi xuất hiện thao tác cập nhật dữ liệu, phần mềm sẽ tự động kiểm tra xem cập nhật đó có vi phạm ràng buộc khoá hay không.

## Tóm tắt bài học

- Một CSDL quan hệ là một tập hợp các bảng dữ liệu (quan hệ) có liên quan với nhau.
- Mỗi bảng trong CSDL đều phải có khoá, đó là tập hợp gồm một hay một số trường cho phép xác định duy nhất một bản ghi trong bảng.
- Dữ liệu trong một bảng phải thoả mãn ràng buộc khoá: Không có hai bản ghi giống nhau ở giá trị khoá. Mọi hệ quản trị CSDL quan hệ đều có cơ chế kiểm soát việc cập nhật dữ liệu để không xảy ra vi phạm ràng buộc khoá đối với mỗi bảng.
